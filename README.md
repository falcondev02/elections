# Выборы мэра

## 1. Введение



В городе N наступило время очередных выборов мэра, и администрация города приняла решение провести выборы с помощью системы электронного голосования. Для этой цели должен быть разработан сервер, обеспечивающий возможность жителям города выдвигать кандидатуры на пост мэра и принимать участие в голосовании.



Администрация города N обратилась к Вам с просьбой разработать такой сервер.



Администрация предполагает, что высказанные ей требования к правилам выдвижения кандидатов и голосованию являются логичными и непротиворечивыми. Так ли это в действительности или нет - должно выясниться в процессе разработки и пробной эксплуатации сервера. Если в ходе разработки появится необходимость корректировки тех или иных пунктов задания, то этот вопрос должен обсуждаться совместно представителями администрации и разработчика с внесением в случае необходимости изменений в техническое задание. Не исключено, что по результатам пробной эксплуатации появится необходимость внесения каких-то дополнений в техническое задание.



Вам предстоит разработать версию сервера, в которой все его данные  должны храниться в оперативной памяти.





## 2. Описание системы.



Жители города N, желающие принять участие в голосовании или выдвинуть свою кандидатуру, должны зарегистрироваться на сервере. При регистрации они указывают

фамилию, имя и отчество (последнее - если имеется)
домашний адрес : улица, дом, квартира (последнее - если имеется)
логин и пароль для входа на сервер.


Введенные при регистрации данные изменению в дальнейшем не подлежат. Потенциальные избиратели не могут регистрироваться два или более раза на сервере.


Зарегистрированный на сервере избиратель может покинуть сервер. Покинувший сервер избиратель имеет право в дальнейшем восстановить свою регистрацию. При этом ему достаточно ввести свои логин и пароль и указать, что он хочет восстановить свою регистрацию. Избиратели, покинувшие сервер и не восстановившие свою регистрацию на момент выборов, не считаются зарегистрированными избирателями и не учитываются при подведении итогов голосования. Списки всех избирателей вывешиваются на сервере.


Зарегистрированный житель города может выставить на пост мэра свою кандидатуру или кандидатуру любого другого зарегистрированного избирателя. Если избиратель выставляет себя в качестве кандидата, то тем самым он дает свое согласие на выдвижение, если же он выдвигает иную кандидатуру, то выдвигаемый должен в дальнейшем дать свое согласие на выдвижение, в противном случае он не считается кандидатом на пост мэра. Кандидат в мэры может впоследствии снять свою кандидатуру. Если кандидат в мэры, давший свое согласие на участие в выборах, хочет покинуть сервер, он должен предварительно снять свою кандидатуру.


Все зарегистрированные избиратели имеют право высказать свои предложения для программ кандидатов. Предложение представляет собой одну текстовую строку, например, “вымостить тротуарной плиткой центральную площадь”, “построить мост через реку” и т.д.  Избиратель имеет право высказать любое количество предложений, добавляя их по мере надобности в любое время, но не позже начала голосования. Удалять и изменять свои предложения избиратель не может. Избиратель, сделавший  предложение, считается его автором. Предложения избирателей, покинувших сервер, не удаляются, их автором считается все общество жителей города.


Любой избиратель вплоть до дня голосования имеет право высказать свое отношение к любому предложению (по шкале 1..5). Автор предложения автоматически оценивает свое предложение оценкой “5” и не может изменить свою оценку. Для остальных предложений избиратель вправе изменить свою оценку или вообще удалить ее. Все оценки, сделанные избирателями, покинувшими сервер, удаляются.
Если на момент, когда некоторый кандидат в мэры дает свое согласие на выдвижение, у этого кандидата есть свои предложения в программу, эти предложения  автоматически включается в его программу. Кандидат в мэры может включить в свою программу любое количество предложений, высказанных как другими кандидатами в мэры, так и рядовыми избирателями. Кандидаты в любой момент могут изменить свою программу, добавив новые предложения или удалив старые, однако не могут удалять предложения, авторами которых они являются. Кандидаты, не представившие своей программы к моменту начала выборов, в выборах участия не принимают. Если кандидат в мэры снимает свою кандидатуру, его программа уничтожается.


Любой избиратель может в любой момент получить

список всех кандидатов , с указанием программы каждого из них
список всех предложений с их средней оценкой, отсортированный по оценке
список предложений, сделанных тем или иным избирателем или несколькими избирателями


Голосование объявляется в определенный момент. После того, как голосование объявлено, регистрация новых избирателей прекращается и любые изменения в списках кандидатов, предложений и т.п. не разрешаются.


При голосовании каждый избиратель может
либо проголосовать за одного и только одного кандидата,
либо проголосовать “против всех”,
либо не участвовать в голосовании.
Кандидатам не разрешается голосовать за себя. Проголосовавший избиратель не вправе ни изменить, ни аннулировать свой выбор, он считается окончательным.



Избранным на пост мэра считается кандидат, получивший наибольшее число голосов при условии, что это число голосов превышает число голосов, поданных “против всех”. В противном случае выборы признаются несостоявшимися.